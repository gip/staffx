---
kind: Document
hash: sha256:f2c45d8facb912150a04d6437bd7a3806b07b75d3fb9e2417ee1a77a2cbe64c8
title: API Functional Testing Coverage Expectations
language: en
---

Functional testing expectations for API rebuild validation.

Baseline health and identity:
- Verify /v1/health reports service and database readiness.
- Verify /v1/me returns authenticated profile and rejects missing/invalid tokens.

User and project flows:
- Validate users/search and users/:handle visibility behavior for authenticated and optional-auth contexts.
- Validate project creation with blank and template modes, including duplicate-name rejection and visibility constraints.
- Validate collaborator, role, and concern management with duplicate and in-use protections.

Thread and matrix flows:
- Validate thread list/create/get/update/delete behavior with project-scoped permissions.
- Validate matrix get/patch operations and resulting thread.matrix.changed events.
- Validate openship bundle generation for active thread systems.

Assistant run lifecycle:
- Validate run enqueue, claim, complete, and cancel transitions.
- Validate completion persistence of messages/changes and optional OpenShip reconciliation side effects.
- Validate failure and cancellation paths still emit terminal events.

Integration and eventing:
- Validate provider authorize-url, callback, status, and disconnect for notion and google.
- Validate event polling cursor behavior and SSE resume behavior under reconnect.

Rebuild acceptance criteria:
1. Each active route has at least one success-path test and one failure-path test.
2. Authorization boundaries are covered across owner/editor/viewer and anonymous contexts.
3. Write endpoints assert expected DB side effects and event publication.
4. Retry/idempotency expectations are validated where workers or clients can resend requests.
5. Out-of-runtime routes are not included in active functional acceptance suite.
