---
kind: "Document"
hash: "sha256:19dbfb185c4fec122ff838311d1d90e36bbb8a1ec252a1c45a93f821ae6cfcff"
title: "System Architecture Overview"
language: "en"
---

# System Architecture Overview

StaffX is a multi-client collaboration platform where architecture state is modeled as OpenShip snapshots linked to thread timelines.

## Runtime partitions
- Web client: browser-hosted React application.
- Desktop client: Electron shell with main and renderer processes.
- API server: Fastify process handling auth, project, thread, run, event, and integration endpoints.
- Database: PostgreSQL as durable store for both collaboration and OpenShip state.
- External SaaS dependencies: Auth0, Notion, Google, Anthropic, OpenAI.

## Shared package dependencies
- packages/ui provides all major React presentation and interaction components.
- packages/agent-runtime provides local assistant execution abstractions, provider routing, and OpenShip snapshot diff utilities.

## Architectural invariants
- OpenShip system state evolves by system fork, not in-place mutation.
- Threads derive current system using SQL helper thread_current_system.
- Assistant execution is serialized per thread for running status.
- Event stream ordering follows occurred_at and id cursor semantics.

## Rebuild dependencies
- Node.js 20 or newer.
- PNPM workspace with apps and packages.
- PostgreSQL with full migration applied.
- Auth0 tenant with configured audience and clients.
- Optional Notion and Google OAuth credentials.
- Optional assistant provider credentials depending on execution mode.
